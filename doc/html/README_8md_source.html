<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>task_editor: README.md Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="README_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# task_editor</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# 概要</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;当文書では[SEED Platform Robots](https://www.seed-solutions.net/?q=seed_jp/node/73)を用いて、</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;一連の作業（以下タスク）およびタスク群（以下シナリオ）を記述/実行するためのシステムSEED Grand Station(以下、SGS)について記述する。</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;# システム構成</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;SGSの構成としては下図の通りである。  </div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;&lt;img src=&quot;https://user-images.githubusercontent.com/12426780/58168973-877f0f80-7cca-11e9-9703-97a55ca0180d.png&quot; width=50%&gt;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;まず、遠隔操作PC/クラウド側では、タスク記述用GUI&quot;Task Editor&quot;を用いてロボットのタスクを記述する。  </div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;次に記述したタスク群を１つのシナリオとして、ロボット側へ転送する。  </div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;ロボット側は、遠隔操作PC/クラウド側から発せられるキューに応じてシナリオを実行する仕組みとなっている。  </div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;なお、ロボット自身および周囲の環境情報は常時、遠隔操作PC/クラウド側へ送られ、データ可視化ツール&quot;Rviz&quot;に表示される。  </div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;ロボット側にはソフトウェア群として[ROS](http://www.ros.org/about-ros/)のパッケージである</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;``aero-ros-pkg``と``task_editor``が入っている。  </div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;``aero-ros-pkg``については[Github](https://github.com/seed-solutions/aero-ros-pkg)を参照することとし、</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;次節以降では``task_editor``について記述する。</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;# task_editor ディレクトリ構成</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;``task_editor``のディレクトリ構成は下図の通りである</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;div style=&quot;line-height: 1em&quot;&gt;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;&lt;pre&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;/task_editor</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;├── CMakeLists.txt</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;├── README.md</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;├── TaskEditor-GUI              //GUIの実行ファイル</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;├── TaskEditor-GUI.ini          //GUIの初期設定ファイル</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;├── /config                     //設定データ</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;│ ├── /maps</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;│ │ ├── map.pgm               //地図データの画像ファイル</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;│ │ └── map.yaml              //地図データの設定ファイル</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;│ ├── scenario.yaml            //シナリオファイル</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;│ └── waypoints.yaml           //waypointsファイル</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;├── /launch                     //複数のノードを起動するためのlaunchファイル </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;│ ├── make_map.launch          //地図作成用</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;│ ├── map_saver.launch         //地図保存用</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;│ ├── robot_bringup.launch     //ロボットのシリアル通信起動用</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;│ ├── simulation.launch        //実機無しでの検証用</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;│ ├── static_map.launch        //地図利用（SLAM）用</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;│ ├── view.launch              //Rvizの表示用</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;│ └── wheel_bringup.launch     //URGの起動、DUALSHOCKによる走行のための設定用</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;├── package.xml</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;├── /scripts                    //シェルスクリプトおよびpythonスクリプト</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;│ ├── bringup.sh               //GUIからのコマンド呼び出し</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;│ ├── scp.exp                  //ロボットPC&lt;-&gt;遠隔操作PCのファイル移行</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;│ ├── ssh.exp                  //SSH接続設定</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;│ └── start.py                 &lt;span style=&quot;color: red; &quot;&gt;//シナリオ実行&lt;/span&gt;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;├── /src                        //ソースファイル</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;│ ├── TaskController.cpp       &lt;span style=&quot;color: red; &quot;&gt;//task_controllerサーバー定義、タスク詳細&lt;/span&gt;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;│ ├── TaskController.hh</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;│ └── WaypointsEditor.cpp      //waypointsの設定/保存</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;├── /srv                        //サービスファイル</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;│ └── TaskController.srv       &lt;span style=&quot;color: red; &quot;&gt;//task_controllerサービスファイル定義&lt;/span&gt;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;└── view.rviz                   //rvizの設定ファイル</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;&lt;/pre&gt;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;&lt;/div&gt;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;# task_editor 仕様</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;シナリオ作成〜実行までの一連の流れは下記のとおりである。  </div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;1. GUIを用いて作成されたシナリオは&quot;保存ボタン&quot;を押すと/configに.yamlファイルとして作成され、ロボット側のPCに転送される  </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;2. GUIにて&quot;シナリオ実行&quot;ボタンを押すとロボット側のPCにて start.py が実行される。&lt;br&gt;  </div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;start.py は主にステートマシンの作成と実行を担っている。  </div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;ステートマシンとしては[smach](http://wiki.ros.org/smach)を用いており、詳細は[O&#39;REILYの書籍](https://www.oreilly.co.jp/books/9784873118093/)が参考となる。  </div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;3. ステートがムーバー移動の場合は、[アクション](http://wiki.ros.org/actionlib)という通信の仕組みで/move_baseとやり取りを行う。&lt;br&gt;  </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;ステートがリフター移動の場合は、[サービス](http://wiki.ros.org/Services)という通信の仕組みで/task_controllerとやり取りを行う。</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;詳細は[工学社の書籍](https://www.kohgakusha.co.jp/support/ros_robot/index.html)が参考となる。</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;シナリオ実行時のフローチャートは下図の通りである。なお、赤文字は実際の関数等を表している。</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;&lt;img src=&quot;https://user-images.githubusercontent.com/12426780/58219653-a9b67300-7d46-11e9-9c72-8a54869f62f5.png&quot; width=80%&gt;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div></div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/task_editor">task_editor</a><br />
Author(s): </br />
<small>autogenerated on Thu May 23 2019 10:39:31</small>
</div>
</body>
</html>
