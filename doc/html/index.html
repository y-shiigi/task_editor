<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>task_editor: task_editor</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">task_editor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>概要</h1>
<p>当文書では<a href="https://www.seed-solutions.net/?q=seed_jp/node/73">SEED Platform Robots</a>を用いて、 一連の作業（以下タスク）およびタスク群（以下シナリオ）を記述/実行するためのシステムSEED Grand Station(以下、SGS)について記述する。</p>
<h1>システム構成</h1>
<p>SGSの構成としては下図の通りである。 </p><div class="image">
<img src="https://user-images.githubusercontent.com/12426780/58168973-877f0f80-7cca-11e9-9703-97a55ca0180d.png"  width="50%"/>
</div>
<p>まず、遠隔操作PC/クラウド側では、タスク記述用GUI"Task Editor"を用いてロボットのタスクを記述する。 次に記述したタスク群を１つのシナリオとして、ロボット側へ転送する。 ロボット側は、遠隔操作PC/クラウド側から発せられるキューに応じてシナリオを実行する仕組みとなっている。 なお、ロボット自身および周囲の環境情報は常時、遠隔操作PC/クラウド側へ送られ、データ可視化ツール"Rviz"に表示される。</p>
<p>ロボット側にはソフトウェア群として<a href="http://www.ros.org/about-ros/">ROS</a>のパッケージである <code>aero-ros-pkg</code>と<code>task_editor</code>が入っている。 <code>aero-ros-pkg</code>については<a href="https://github.com/seed-solutions/aero-ros-pkg">Github</a>を参照することとし、 次節以降では<code>task_editor</code>について記述する。</p>
<h1>task_editor ディレクトリ構成</h1>
<p><code>task_editor</code>のディレクトリ構成は下図の通りである</p>
<div style="line-height: 1em"> <pre>
/task_editor
├── CMakeLists.txt
├── <a class="el" href="README_8md.html">README.md</a>
├── TaskEditor-GUI              //GUIの実行ファイル
├── TaskEditor-GUI.ini          //GUIの初期設定ファイル
├── /config                     //設定データ
│ ├── /maps
│ │ ├── map.pgm               //地図データの画像ファイル
│ │ └── map.yaml              //地図データの設定ファイル
│ ├── scenario.yaml            //シナリオファイル
│ └── waypoints.yaml           //waypointsファイル
├── /launch                     //複数のノードを起動するためのlaunchファイル 
│ ├── make_map.launch          //地図作成用
│ ├── map_saver.launch         //地図保存用
│ ├── robot_bringup.launch     //ロボットのシリアル通信起動用
│ ├── simulation.launch        //実機無しでの検証用
│ ├── static_map.launch        //地図利用（SLAM）用
│ ├── view.launch              //Rvizの表示用
│ └── wheel_bringup.launch     //URGの起動、DUALSHOCKによる走行のための設定用
├── package.xml
├── /scripts                    //シェルスクリプトおよびpythonスクリプト
│ ├── bringup.sh               //GUIからのコマンド呼び出し
│ ├── scp.exp                  //ロボットPC&lt;-&gt;遠隔操作PCのファイル移行
│ ├── ssh.exp                  //SSH接続設定
│ └── <a class="el" href="start_8py.html">start.py</a>                 <span style="color: red; ">//シナリオ実行</span>
├── /src                        //ソースファイル
│ ├── <a class="el" href="TaskController_8cpp.html">TaskController.cpp</a>       <span style="color: red; ">//task_controllerサーバー定義、タスク詳細</span>
│ ├── <a class="el" href="TaskController_8hh.html">TaskController.hh</a>
│ └── <a class="el" href="WaypointsEditor_8cpp.html">WaypointsEditor.cpp</a>      //waypointsの設定/保存
├── /srv                        //サービスファイル
│ └── <a class="el" href="TaskController_8srv.html">TaskController.srv</a>       <span style="color: red; ">//task_controllerサービスファイル定義</span>
└── view.rviz                   //rvizの設定ファイル
</pre> </div><h1>task_editor 仕様</h1>
<p>シナリオ作成〜実行までの一連の流れは下記のとおりである。</p>
<ol type="1">
<li>GUIを用いて作成されたシナリオは"保存ボタン"を押すと/configに.yamlファイルとして作成され、ロボット側のPCに転送される</li>
<li>GUIにて"シナリオ実行"ボタンを押すとロボット側のPCにて <a class="el" href="start_8py.html">start.py</a> が実行される。<br />
 <a class="el" href="start_8py.html">start.py</a> は主にステートマシンの作成と実行を担っている。 ステートマシンとしては<a href="http://wiki.ros.org/smach">smach</a>を用いており、詳細は<a href="https://www.oreilly.co.jp/books/9784873118093/">O'REILYの書籍</a>が参考となる。</li>
<li>ステートがムーバー移動の場合は、<a href="http://wiki.ros.org/actionlib">アクション</a>という通信の仕組みで/move_baseとやり取りを行う。<br />
 ステートがリフター移動の場合は、<a href="http://wiki.ros.org/Services">サービス</a>という通信の仕組みで/task_controllerとやり取りを行う。 詳細は<a href="https://www.kohgakusha.co.jp/support/ros_robot/index.html">工学社の書籍</a>が参考となる。</li>
</ol>
<p>シナリオ実行時のフローチャートは下図の通りである。なお、赤文字は実際の関数等を表している。</p>
<div class="image">
<img src="https://user-images.githubusercontent.com/12426780/58219653-a9b67300-7d46-11e9-9c72-8a54869f62f5.png"  width="80%"/>
</div>
 </div></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/task_editor">task_editor</a><br />
Author(s): </br />
<small>autogenerated on Thu May 23 2019 10:39:31</small>
</div>
</body>
</html>
